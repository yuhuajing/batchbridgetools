<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=EDGE">
    <title>ETH跨链</title>
    <link rel="stylesheet" type="text/css" href="css/style.css"/>
    <link rel="stylesheet" type="text/css" href="css/webbase.css"/>
    <link rel="stylesheet" type="text/css" href="css/pages-register.css"/>
    <style>
        .code-span {
            display: inline-block;
            border: 1px solid #999;
            text-align: center;
            line-height: 35px;
            width: 118px;
            height: 35px;
            float: right;
            margin-left: 10px
        }
        .code-span:hover {
            background-color: #c0ccda;
        }
        .uuid-label {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
    </style>
</head>

<body>

<div class="zhucebox">
    <div class="register mainregister py-container">
        <div class="zhucetab">
            <a>ETH跨链</a>
        </div>

        <div class="registerArea" id="registerApp">
            <div class="info" style="width: 650px">
                <div><p>ETH跨链</p></div>
                <form method="POST" enctype="multipart/form-data" action="/portal" onsubmit="portal(event)">

                    <div class="control-group">
                        <label class="control-label">来源链：</label>
                        <div class="controls">
                            <select name="fromChain" required>
                                <option value="">请选择来源链</option>
<!--                                <option value="ethereum">Ethereum</option>-->
                                <option value="bsc">BSC</option>
                                <option value="base">BASE</option>
<!--                                <option value="polygon">Polygon</option>-->
<!--                                <option value="arbitrum">Arbitrum</option>-->
                            </select>
                        </div>
                    </div>
                    <br>

                    <div class="control-group">
                        <label class="control-label">目标链：</label>
                        <div class="controls">
                            <select name="toChain" required>
                                <option value="">请选择目标链</option>
                                <option value="ethereum">Ethereum</option>
<!--                                <option value="bsc">BSC</option>-->
<!--                                <option value="polygon">Polygon</option>-->
<!--                                <option value="arbitrum">Arbitrum</option>-->
                            </select>
                        </div>
                    </div>
                    <br>

                    <div class="control-group">
                        <label class="control-label">选择文件：</label>
                        <div class="controls">
                            <input type="file" name="file" required>
                        </div>
                    </div>
                    <br>

                    <div class="controls btn-reg">
                        <input class="sui-btn btn-block btn-xlarge btn-danger" type="submit" value="Swap" />
                    </div>
                </form>

                <div class="clearfix"></div>
            </div>
        </div>
    </div>
</div>

<script>
    function portal(event) {
        alert("批量-CSV文件校验中，请稍后!!!");
        event.preventDefault(); // 阻止表单默认提交
        var form = event.target;
        var formData = new FormData(form);

        fetch('/portal', {
            method: 'POST',
            body: formData
        }).then(function(response) {
            if (response.ok) {
                alert("csv文件处理完毕!");
                window.location.href = '/';
            } else {
                response.json().then(function(data) {
                    var queryParams = new URLSearchParams(data).toString();
                    window.location.href = '/error.html?' + queryParams;
                });
            }
        }).catch(function(error) {
            alert("提交失败：" + error);
        });
    }
</script>

</body>
</html>
